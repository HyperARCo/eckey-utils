# eckeyUtils

Node.js based EC key utilities that can generate PEM keys (required by crypto.sign and crypto.verify) from the raw ones usually but not necessarily generated by crypto.ECDH.

## Motivation

Namely the ECDH.generateKeys function should be used to generate EC keys for the key-exchange purpose, but actually the keys it generates are bare/raw ec private key (i.e., `*d*` in the cryptographic context) and ec public key (the relevant EC point, calculated from base point `*G*` and `*d*`), so supposedly there's no obstacle to use it in ECSDA scenario except that the crypto.Sign and crypto.Verify function doesn't support using raw key directly. This library will bridge this gap by converting raw keys to PEM keys.

## CAUTION
Some people argue that use one key pair for both ECDH and ECDSA will compromise the security, so please try to avoid using one key-pair for both usages except that you know there's no negative byeffect.

## Usage

```js
const crypto = require('crypto'), ecKeyUtils = require('eckey-utils');
const curveName = 'secp256k1';

const ecdh = crypto.createECDH(curveName);
ecdh.generateKeys();

const pemKeyPair = ecKeyUtils.generatePemKeys(curveName, {
	privateKey: ecdh.getPrivateKey(),
	publicKey: ecdh.getPublicKey()
});

const sign = crypto.createSign('sha256');
const message = Buffer.from('Hello, World!');
sign.update(message);
let sig = sign.sign(pemKeyPair.privateKey);

const verify = crypto.createVerify('sha256');
verify.update(message);
console.log(verify.verify(pemKeyPair.publicKey, sig));
```

## Dependencies
Node.js version later than 5.x

## License
Written in 2018 by tibetty <xihua.duan@gmail.com>
